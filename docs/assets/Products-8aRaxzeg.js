import{r as a,j as e,b as y,a as C,u as P,f as k,s as p}from"./index-D-X6CPgb.js";function L({rating:s}){const n=a.useMemo(()=>{const o=[];for(let l=1;l<=5;l++)s>=l?o.push("full"):s>=l-.5?o.push("half"):o.push("empty");return o},[s]);return e.jsx("div",{className:"flex items-center gap-0.5",children:n.map((o,l)=>e.jsx("span",{className:"text-amber-400 text-xl leading-none",children:o==="full"?"★":o==="half"?"✭":"✩"},l))})}const E=a.memo(L);function M({product:s}){const n=y(),o=()=>{n(`/products/${s.id}`)},l=a.useMemo(()=>Number(s.reviewStars)||0,[s.reviewStars]);return e.jsxs("div",{onClick:o,className:"group flex flex-col overflow-hidden rounded-xl bg-white border border-gray-100 shadow-lg transition-all duration-300 hover:shadow-2xl cursor-pointer",children:[e.jsx("div",{className:"w-full h-52 sm:h-56 md:h-60 lg:h-64 overflow-hidden bg-gray-100",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-110"})}),e.jsxs("div",{className:"flex flex-col flex-1 p-5 space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 line-clamp-2 transition duration-300 group-hover:text-indigo-600",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{rating:l}),e.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-600",children:l.toFixed(1)})]}),e.jsxs("p",{className:"text-2xl font-extrabold text-indigo-700",children:["₹",s.price]})]}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-3 flex-grow border-t border-gray-100 pt-3",children:s.description}),e.jsx("button",{onClick:c=>{c.stopPropagation(),o()},className:"mt-auto w-full rounded-lg bg-indigo-600 py-2.5 text-base font-semibold text-white shadow-md shadow-indigo-300 transition duration-300 hover:bg-indigo-700 transform hover:scale-[1.02] active:scale-100 focus:outline-none focus:ring-4 focus:ring-indigo-300 cursor-pointer",children:"View Details"})]})]})}const S=a.memo(M);function R(){const[s,n]=a.useState(1),o=12,l=C(),{items:c,status:m,error:f,search:h,price:u}=P(t=>t.products);a.useEffect(()=>{l(k())},[l]);const b=a.useCallback(t=>{const r=t.target.value;if(r==="all")l(p([0,1e6]));else{const[d,N]=r.split("-");l(p([Number(d),Number(N)]))}n(1)},[l]),i=a.useMemo(()=>{const t=h.toLowerCase();return c.filter(r=>r.price>=u[0]&&r.price<=u[1]&&(r.name.toLowerCase().includes(t)||r.keywords.some(d=>d.toLowerCase().includes(t))||r.category.some(d=>d.toLowerCase().includes(t))||r.sellerName.toLowerCase().includes(t)||r.description.toLowerCase().includes(t)||r.id.toLowerCase().includes(t)))},[c,h,u]),g=a.useMemo(()=>{const t=s*o,r=t-o;return i.slice(r,t)},[i,s]),x=a.useMemo(()=>Math.ceil(i.length/o),[i]),j=a.useCallback(()=>s<x&&n(t=>t+1),[s,x]),w=a.useCallback(()=>s>1&&n(t=>t-1),[s]),v=a.useCallback(t=>n(t),[]);return a.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-10 py-12 bg-slate-50 min-h-screen",children:[e.jsx("div",{className:"bg-indigo-700 text-white rounded-lg shadow-xl mb-10 p-6 sm:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight",children:"Explore Catalog"}),e.jsxs("p",{className:"mt-1 text-indigo-200 font-medium",children:["Showing ",g.length," of ",i.length," products"]})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsxs("select",{id:"price-filter",onChange:b,defaultValue:"all",className:"appearance-none block w-full rounded-lg border-2 border-indigo-400 bg-indigo-600 py-3 pl-4 pr-10 text-base shadow-lg text-white font-semibold focus:ring-2 focus:ring-white",children:[e.jsx("option",{value:"all",children:"Price: All Ranges"}),e.jsx("option",{value:"1-1000",children:"₹1 - ₹1000"}),e.jsx("option",{value:"1001-5000",children:"₹1001 - ₹5000"}),e.jsx("option",{value:"5001-10000",children:"₹5001 - ₹10000"}),e.jsx("option",{value:"10001-20000",children:"₹10001 - ₹20000"}),e.jsx("option",{value:"20001-50000",children:"₹20001 - ₹50000"}),e.jsx("option",{value:"50001-100000",children:"₹50001 - ₹100000"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-white",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.06z"})})})]})]})}),m==="Loading"&&e.jsxs("div",{className:"py-20 text-center bg-white rounded-xl shadow-md border border-gray-100",children:[e.jsx("div",{className:"animate-spin h-14 w-14 border-4 border-indigo-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-6 text-indigo-700 text-xl font-semibold",children:"Fetching products..."})]}),m==="failed"&&e.jsxs("div",{className:"py-10 bg-red-50 border border-red-400 text-red-700 px-6 rounded-lg shadow-md",children:[e.jsx("p",{className:"font-extrabold text-xl",children:"Connection Error"}),e.jsxs("p",{className:"text-sm mt-1",children:["Could not load products. Error: ",f]})]}),i.length===0&&m!=="Loading"&&e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl shadow-md border border-gray-200",children:[e.jsx("p",{className:"text-gray-700 text-2xl font-bold",children:"No Products Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Please adjust your search or price filters."})]}),e.jsx("div",{className:`\r
          grid \r
          grid-cols-1 \r
          sm:grid-cols-2 \r
          lg:grid-cols-3 \r
          xl:grid-cols-4 \r
          gap-8\r
          mt-8\r
        `,children:g.map(t=>e.jsx(S,{product:t},t.id))}),i.length>o&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-12 pt-6 border-t border-gray-200 flex-wrap",children:[e.jsx("button",{onClick:w,disabled:s===1,className:"px-5 py-2 text-sm font-semibold text-slate-700 bg-white border border-gray-300 rounded-full shadow-md hover:bg-slate-100 disabled:opacity-50 cursor-pointer",children:"← Previous"}),e.jsx("div",{className:"flex gap-1.5",children:Array.from({length:x},(t,r)=>e.jsx("button",{onClick:()=>v(r+1),className:`px-4 py-2 text-sm font-bold rounded-full transition cursor-pointer ${s===r+1?"bg-indigo-600 text-white shadow-lg transform scale-105":"bg-white text-slate-600 border border-gray-300 hover:bg-indigo-50 hover:text-indigo-600"}`,children:r+1},r))}),e.jsx("button",{onClick:j,disabled:s===x,className:"px-5 py-2 text-sm font-semibold text-slate-700 bg-white border border-gray-300 rounded-full shadow-md hover:bg-slate-100 disabled:opacity-50 cursor-pointer",children:"Next →"})]})]})}function $(){return e.jsx(R,{})}export{$ as default};
